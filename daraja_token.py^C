import base64
import requests

# Your NEW Daraja keys from AfriSmartPayV2
key = "TI2BPsefU2TZrA0uCrjOJgegKoleAwERJKM2svnRfzllyD8t"
secret = "Qrdn6LmWyOlz23mvDNCOkfOemWGTm1CnLThvdQIhNHDjORNMAxBeckhZFmLVvO8F"

# Encode credentials into Base64
credentials = f"{key}:{secret}"
encoded = base64.b64encode(credentials.encode()).decode()

# Headers for OAuth
headers = {
    "Authorization": f"Basic {encoded}",
    "Content-Type": "application/json"
}

# Daraja OAuth URL
url = "https://sandbox.safaricom.co.ke/oauth/v1/generate?grant_type=client_credentials"

# Make request
response = requests.get(url, headers=headers)

# Print the result
print("Status code:", response.status_code)
print("Body:", response.text)
